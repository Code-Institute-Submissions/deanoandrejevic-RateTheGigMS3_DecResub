{% extends "base.html" %}

{% block home %}

<div id="profile-div" class="row profile-img">
    {% if session.user %}
    <div class="col s12">
        <div class="col m4 offset-m4 welcome-box center-align">
            <h4 class="orange-text text-darken-2">Hey {{ session.user }}!</h4>
            <p class="white-text">All your upcoming and previous gig reviews are stored here!</p>
            <p class="white-text">All upcoming gigs are not visible to everyone until you have attended and reviewed the
                event.</p>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}

{% block content %}

<h3 class="center-align">Your Reviews!</h3>

{% if gigs.created_by|length > 0  %}
<div class="row">
    <div class="col s12 center-align">
        <p class="add-one">
            Oops it looks like you don't have any gigs yet! Care to add one?
        </p>
        <a href="{{ url_for('add_gig') }}" class="orange btn-large"><i class="fas fa-folder-plus"></i> Add Review!</a>
    </div>
</div>
{% else %}
<div class="row">
    {% for gig in gigs %}
    {% if session.user == gig.created_by %}
    <div class="col s12 m3">
        <div class="card card-color">
            <div class="card-content white-text">
                <span class="card-title orange-text text-darken-2">
                    <h5 class="review-cards">{{ gig.band_name }}</h5>
                </span>
                <p class="card-text"><strong>Gig date:</strong> {{ gig.when }}</p>
                <p class="card-text"><strong>Venue:</strong> {{ gig.where }}</p>
                <p class="card-text"><strong>Review:</strong> {{ gig.description }}</p>
                <p class="card-text"><strong>Rating:</strong> {{ gig.rating }}/10</p>
                <p class="card-text"><i>Reviewed By: {{ gig.created_by }}</i></p>
            </div>
            <div class="card-action orange-text text-darken-2">
                <a href="{{ url_for('edit_gig', gig_id=gig._id) }}">Edit</a>
                <a href="{{ url_for('delete', gig_id=gig._id) }}">Delete</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endif %}

{% endblock %}